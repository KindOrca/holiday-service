# Holiday Service API

μ „ μ„Έκ³„ κ³µν΄μΌ μ •λ³΄λ¥Ό μ΅°νν•κ³  κ΄€λ¦¬ν•  μ μλ” REST API μ„λΉ„μ¤

<br>

## π“‹ λ©μ°¨

- [ν”„λ΅μ νΈ μ†κ°](#ν”„λ΅μ νΈ-μ†κ°)
- [μ£Όμ” κΈ°λ¥](#μ£Όμ”-κΈ°λ¥)
- [κΈ°μ  μ¤νƒ](#κΈ°μ -μ¤νƒ)
- [λΉλ“ λ° μ‹¤ν–‰ λ°©λ²•](#λΉλ“-λ°-μ‹¤ν–‰-λ°©λ²•)
- [REST API λ…μ„Έ](#rest-api-λ…μ„Έ)
---

<br>

## ν”„λ΅μ νΈ μ†κ°

Holiday Serviceλ” μ™Έλ¶€ κ³µν΄μΌ APIμ™€ μ—°λ™ν•μ—¬ μ „ μ„Έκ³„ κ³µν΄μΌ μ •λ³΄λ¥Ό μ κ³µν•λ” λ°±μ—”λ“ μ„λΉ„μ¤μ…λ‹λ‹¤.
κµ­κ°€λ³„, μ—°λ„λ³„ κ³µν΄μΌμ„ μ΅°νν•κ³ , λ°μ΄ν„°λ¥Ό λ™κΈ°ν™”ν•λ©°, κ΄€λ¦¬ν•  μ μλ” κΈ°λ¥μ„ μ κ³µν•©λ‹λ‹¤.

### νΉμ§•
- μ „ μ„Έκ³„ 200κ° μ΄μƒ κµ­κ°€μ κ³µν΄μΌ μ •λ³΄ μ κ³µ
-  λ‹¤μ–‘ν• μ΅°κ±΄μΌλ΅ κ³µν΄μΌ κ²€μƒ‰ (μ—°λ„, κµ­κ°€, λ‚ μ§ λ²”μ„, νƒ€μ…)
- κµ­κ°€ μ½”λ“ λλ” κµ­κ°€ μ΄λ¦„μΌλ΅ κ²€μƒ‰ κ°€λ¥ (μ: "KR", "Korea",)
-  νμ΄μ§€λ„¤μ΄μ… μ§€μ›μΌλ΅ λ€μ©λ‰ λ°μ΄ν„° ν¨μ¨μ  μ²λ¦¬
-  μ™Έλ¶€ API μ—°λ™μ„ ν†µν• λ°μ΄ν„° μ¬λ™κΈ°ν™”
-  μ—°λ„ λ° κµ­κ°€ λ‹¨μ„ λ°μ΄ν„° μ‚­μ 
---

<br>

## μ£Όμ” κΈ°λ¥

### 1. κ³µν΄μΌ κ²€μƒ‰
- μ—°λ„, κµ­κ°€, λ‚ μ§ λ²”μ„, κ³µν΄μΌ νƒ€μ…λ³„ μ΅°ν
- κµ­κ°€ μ½”λ“(KR) λλ” κµ­κ°€ μ΄λ¦„(Korea)μΌλ΅ κ²€μƒ‰ κ°€λ¥
- νμ΄μ§€λ„¤μ΄μ… μ§€μ› (10, 20, 50, 100κ° λ‹¨μ„)

### 2. κ³µν΄μΌ λ°μ΄ν„° μ¬λ™κΈ°ν™”
- νΉμ • μ—°λ„μ™€ κµ­κ°€μ κ³µν΄μΌ λ°μ΄ν„°λ¥Ό μ™Έλ¶€ APIμ—μ„ λ‹¤μ‹ κ°€μ Έμ™€ μ—…λ°μ΄νΈ

### 3. κ³µν΄μΌ λ°μ΄ν„° μ‚­μ 
- νΉμ • μ—°λ„μ™€ κµ­κ°€μ κ³µν΄μΌ λ°μ΄ν„°λ¥Ό μ‚­μ 
---

<br>

## κΈ°μ  μ¤νƒ

- **Language**: Java 21
- **Framework**: Spring Boot 3.4
- **Database**: PostgreSQL / MySQL
- **ORM**: Spring Data JPA, QueryDSL 5
- **Build Tool**: Gradle
- **API Documentation**: Swagger
---

## λΉλ“ λ° μ‹¤ν–‰ λ°©λ²•

### 1. ν”„λ΅μ νΈ ν΄λ΅ 
```bash
git clone https://github.com/KindOrca/holiday-service.git
cd holiday-service
```

### 2. λ°μ΄ν„°λ² μ΄μ¤ μ„¤μ •
`src/main/resources/application.yml` νμΌμ„ μμ •

```yaml
server:
  port: 8080

spring:
  datasource:
    driver-class-name: org.h2.Driver
    url: jdbc:h2:mem:holiday;
    username: root
    password: 1234

  h2:
    console:
      enabled: true
      path: /h2-console

  jpa:
    database-platform: org.hibernate.dialect.H2Dialect
    hibernate:
      ddl-auto: create
    properties:
      hibernate:
        dialect: org.hibernate.dialect.H2Dialect
        format_sql: true
        show_sql: true
```
### 3. μ‹¤ν–‰
```bash
# Gradleλ΅ μ‹¤ν–‰
./gradlew bootRun
```

### 4. API λ¬Έμ„ ν™•μΈ
μ• ν”λ¦¬μΌ€μ΄μ… μ‹¤ν–‰ ν›„ μ•„λ URLμ—μ„ Swagger UIλ¥Ό ν†µν•΄ API λ¬Έμ„λ¥Ό ν™•μΈν•  μ μμµλ‹λ‹¤.

```
http://localhost:8080/swagger-ui.html
```
---

<br>

## REST API λ…μ„Έ

### μ£Όμ” μ—”λ“ν¬μΈνΈ

| Method | URL | μ„¤λ… |
|--------|-----|------|
| `GET` | `/api/v1/holiday/search` | κ³µν΄μΌ μ΅°ν (νμ΄μ§•) |
| `PUT` | `/api/v1/holiday/refresh` | λ°μ΄ν„° μ¬λ™κΈ°ν™” |
| `DELETE` | `/api/v1/holiday/delete` | μ—°λ„+κµ­κ°€ λ‹¨μ„ μ‚­μ  |

---

### 1. κ³µν΄μΌ κ²€μƒ‰ (GET)

#### μ—”λ“ν¬μΈνΈ
```
GET /api/v1/holiday/search
```

#### μ”μ²­ νλΌλ―Έν„°

| νλΌλ―Έν„° | νƒ€μ… | ν•„μ | μ„¤λ… |
|---------|------|------|------|
| `year` | Integer | β | μ΅°νν•  μ—°λ„ (1900-2100) |
| `country` | String | β | κµ­κ°€ μ½”λ“ λλ” κµ­κ°€ μ΄λ¦„ |
| `from` | LocalDate | β | κ²€μƒ‰ μ‹μ‘μΌ (YYYY-MM-DD) |
| `to` | LocalDate | β | κ²€μƒ‰ μΆ…λ£μΌ (YYYY-MM-DD) |
| `type` | String | β | κ³µν΄μΌ νƒ€μ… |
| `page` | Integer | β | νμ΄μ§€ λ²νΈ (0λ¶€ν„° μ‹μ‘) |
| `size` | Integer | β | νμ΄μ§€ ν¬κΈ° |

#### κ³µν΄μΌ νƒ€μ…
- `Public`: κ³µν΄μΌ
- `Bank`: μ€ν–‰ ν΄μΌ
- `School`: ν•™κµ ν΄μΌ
- `Authorities`: κ΄€κ³µμ„ ν΄μΌ
- `Optional`: μ„ νƒμ  ν΄μΌ
- `Observance`: κΈ°λ…μΌ

#### κµ­κ°€ κ²€μƒ‰ λ°©λ²•
κµ­κ°€ νλΌλ―Έν„°λ” λ‹¤μ μ„Έ κ°€μ§€ λ°©μ‹μΌλ΅ μ…λ ¥ κ°€λ¥ν•©λ‹λ‹¤:
- **κµ­κ°€ μ½”λ“**: `country=KR` (2μλ¦¬ λ€λ¬Έμ)
- **μλ¬Έ κµ­κ°€ μ΄λ¦„**: `country=South Korea` (λ€μ†λ¬Έμ λ¬΄κ΄€)

#### μ”μ²­ μμ‹
```bash
# κΈ°λ³Έ κ²€μƒ‰ (2024λ…„ ν•κµ­ κ³µν΄μΌ)
GET /api/v1/holiday/search?year=2024&country=KR

# κµ­κ°€ μ΄λ¦„μΌλ΅ κ²€μƒ‰
GET /api/v1/holiday/search?year=2024&country=Korea

# λ‚ μ§ λ²”μ„ κ²€μƒ‰
GET /api/v1/holiday/search?from=2024-01-01&to=2024-03-31&country=KR

# νƒ€μ…λ³„ κ²€μƒ‰
GET /api/v1/holiday/search?year=2024&country=KR&type=Public

# νμ΄μ§€λ„¤μ΄μ…
GET /api/v1/holiday/search?year=2024&country=KR&page=0&size=20
```

#### κ²€μ¦ κ·μΉ™
- `year`: 1900 ~ 2100 λ²”μ„ λ‚΄ κ°’
- `country`: μ΅΄μ¬ν•λ” κµ­κ°€ μ½”λ“ λλ” κµ­κ°€ μ΄λ¦„
- `from`, `to`: `to`λ” `from`λ³΄λ‹¤ μ΄ν›„ λ‚ μ§μ—¬μ•Ό ν•¨
- `type`: μ§€μ •λ κ³µν΄μΌ νƒ€μ… μ¤‘ ν•λ‚
---

### 2. κ³µν΄μΌ μ¬λ™κΈ°ν™” (PUT)

#### μ—”λ“ν¬μΈνΈ
```
PUT /api/v1/holiday/refresh
```

#### μ”μ²­ νλΌλ―Έν„°

| νλΌλ―Έν„° | νƒ€μ… | ν•„μ | μ„¤λ… | μμ‹ |
|---------|------|------|------|------|
| `year` | Integer | O | λ™κΈ°ν™”ν•  μ—°λ„ | 2024 |
| `countryCode` | String | O | κµ­κ°€ μ½”λ“ (2μλ¦¬ λ€λ¬Έμ) | KR |

#### μ”μ²­ μμ‹
```bash
PUT /api/v1/holiday/refresh?year=2024&countryCode=KR
```

#### μ‘λ‹µ
```
refresh ok
```

#### μ„¤λ…
- μ™Έλ¶€ κ³µν΄μΌ APIμ—μ„ μµμ‹  λ°μ΄ν„°λ¥Ό κ°€μ Έμ™€ λ°μ΄ν„°λ² μ΄μ¤λ¥Ό μ—…λ°μ΄νΈν•©λ‹λ‹¤
- κΈ°μ΅΄ λ°μ΄ν„°λ” μ‚­μ λκ³  μƒλ΅μ΄ λ°μ΄ν„°λ΅ λ€μ²΄λ©λ‹λ‹¤
- μ™Έλ¶€ API μ¥μ•  μ‹ μ—λ¬κ°€ λ°μƒν•  μ μμµλ‹λ‹¤

---

### 3. κ³µν΄μΌ μ‚­μ  (DELETE)

#### μ—”λ“ν¬μΈνΈ
```
DELETE /api/v1/holiday/delete
```

#### μ”μ²­ νλΌλ―Έν„°

| νλΌλ―Έν„° | νƒ€μ… | ν•„μ | μ„¤λ… | μμ‹ |
|---------|------|------|------|------|
| `year` | Integer | O | μ‚­μ ν•  μ—°λ„ | 2024 |
| `countryCode` | String | O | κµ­κ°€ μ½”λ“ (2μλ¦¬ λ€λ¬Έμ) | KR |

#### μ”μ²­ μμ‹
```bash
DELETE /api/v1/holiday/delete?year=2024&countryCode=KR
```

#### μ‘λ‹µ
```
delete ok
```

#### μ„¤λ…
- νΉμ • μ—°λ„μ™€ κµ­κ°€μ λ¨λ“  κ³µν΄μΌ λ°μ΄ν„°λ¥Ό μ‚­μ ν•©λ‹λ‹¤
- μ‚­μ λ λ°μ΄ν„°λ” λ³µκµ¬ν•  μ μ—†μµλ‹λ‹¤
- `/refresh` APIλ¥Ό ν†µν•΄ λ‹¤μ‹ λ™κΈ°ν™”ν•  μ μμµλ‹λ‹¤

---

<br>

## μ£Όμ” κµ¬ν„ μ‚¬ν•­

### 1. κµ­κ°€ μ΄λ¦„ μλ™ λ³€ν™
`CountryCache`λ¥Ό ν™μ©ν•μ—¬ μ‚¬μ©μκ°€ μ…λ ¥ν• κµ­κ°€ μ΄λ¦„μ„ κµ­κ°€ μ½”λ“λ΅ μλ™ λ³€ν™ν•©λ‹λ‹¤.

```java
// "KR" β†’ "KR"
// "South Korea" β†’ "KR" (λ€μ†λ¬Έμ λ¬΄κ΄€)
```

### 2. λ™μ  μΏΌλ¦¬ μ²λ¦¬
QueryDSLμ„ μ‚¬μ©ν•μ—¬ λ‹¤μ–‘ν• κ²€μƒ‰ μ΅°κ±΄μ„ λ™μ μΌλ΅ μ²λ¦¬ν•©λ‹λ‹¤.

### 3. νμ΄μ§€λ„¤μ΄μ…
Spring Dataμ `Pageable`μ„ ν™μ©ν•μ—¬ ν¨μ¨μ μΈ νμ΄μ§• μ²λ¦¬λ¥Ό κµ¬ν„ν–μµλ‹λ‹¤.

### 4. κ²€μ¦ μ²λ¦¬
- μ—°λ„ λ²”μ„ κ²€μ¦ (1900-2100)
- κµ­κ°€ μ΅΄μ¬ μ—¬λ¶€ κ²€μ¦
- λ‚ μ§ λ²”μ„ κ²€μ¦ (μΆ…λ£μΌ > μ‹μ‘μΌ)
- κ³µν΄μΌ νƒ€μ… κ²€μ¦
---

<br>

## ν…μ¤νΈ

```bash
# μ „μ²΄ ν…μ¤νΈ μ‹¤ν–‰
./gradlew test
```

<br>

## μ‘μ„±μ
**KindOrca**
